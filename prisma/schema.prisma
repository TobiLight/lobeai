// database
datasource db {
    provider = "postgresql"
    url      = "postgresql://postgres:EdE46bac2f6bc215da6F5E61EBfe1-fF@postgres.railway.internal:5432/railway"
}

// generator
generator py {
    provider             = "prisma-client-py"
    interface            = "asyncio"
    recursive_type_depth = 5
}

model User {
    id                   String               @id @unique
    first_name           String?
    last_name            String?
    email                String               @unique
    password             String
    conversations        Conversation[]
    database_connections DatabaseConnection[]
    created_at           DateTime             @default(now())
    updated_at           DateTime             @default(now())
}

model Conversation {
    id         String   @id @unique
    prompts    Prompt[]
    user_id    String
    user       User     @relation(fields: [user_id], references: [id])
    created_at DateTime @default(now())
    updated_at DateTime @default(now())
}

model Prompt {
    id              String       @id @unique
    query           String
    response        String
    conversation_id String
    conversation    Conversation @relation(fields: [conversation_id], references: [id])
    created_at      DateTime     @default(now())
    updated_at      DateTime     @default(now())
}

model DatabaseConnection {
    id         String   @id @unique
    type       String
    uri        String
    username   String
    password   String
    host       String
    port       String
    user_id    String
    user       User     @relation(fields: [user_id], references: [id])
    created_at DateTime @default(now())
    updated_at DateTime @default(now())
}
