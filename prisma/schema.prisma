// database
datasource db {
    provider = "postgresql"
    url      = "postgresql://postgres:3c2Fc4414dbb*BgaC*6GA-3E133EdGFE@viaduct.proxy.rlwy.net:58903/railway"
}

// generator
generator py {
    provider             = "prisma-client-py"
    interface            = "asyncio"
    recursive_type_depth = 5
}

model User {
    id                   String               @id @unique
    name                 String?
    email                String
    conversations        Conversation[]
    database_connections DatabaseConnection[]
    created_at           DateTime             @default(now())
    updated_at           DateTime             @default(now())
    Prompt               Prompt[]
}

model Conversation {
    id         String   @id @unique
    prompts    Prompt[]
    user       User     @relation(fields: [user_id], references: [id])
    user_id    String
    created_at DateTime @default(now())
    updated_at DateTime @default(now())
}

model Prompt {
    id              String       @id @unique
    query           String
    response        String
    conversation    Conversation @relation(fields: [conversation_id], references: [id])
    conversation_id String
    // user            User         @relation(fields: [user_id], references: [id])
    // user_id         String
    created_at      DateTime     @default(now())
    updated_at      DateTime     @default(now())
}

model DatabaseConnection {
    id            String   @id @unique
    type          String
    uri           String
    database_name String?
    user_id       String
    user          User     @relation(fields: [user_id], references: [id])
    created_at    DateTime @default(now())
    updated_at    DateTime @default(now())
}
